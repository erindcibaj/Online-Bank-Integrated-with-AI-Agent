<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="nav-admin :: layout(~{::body})">
<head>
    <title>Personal Loan Page</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
        
          <h1>Personal Accounts - Loan List</h1>  
           
            <div th:if="${message}" class="alert alert-success" role="alert">
                <span th:text="${message}"></span>
            </div>
          
          <table class="table table-striped table-bordered table_admin" style="margin-top: 40px;">
                <thead class="table-dark">
                    <tr>
                        <th>#</th>
                        <th>Account Number</th>
                        <th>Loan Type</th>
                        <th>Loan Purpose</th>
                        <th>Amount</th>
                        <th>Currency</th>
                        <th>Status</th>
                    </tr>
                </thead>
                
                <tbody>
                    <tr th:each="loan, iterStat : ${loans}">
                        <td th:text="${iterStat.index + 1}"></td>
                        <td th:text="${loan.accountNumber}"></td>
                        <td th:text="${loan.loanType}"></td>
                        <td th:text="${loan.loanPurpose}"></td>
                        <td th:text="${loan.amount}"></td>
                        <td th:text="${loan.currency}"></td>      
                        <td>
                            <form th:action="@{/updateStatus}" method="post">
                                <input type="hidden" name="loanId" th:value="${loan.id}" />
                                <select name="status" class="form-select" style="margin-bottom: 10px">
                                    <option value="Pending" th:selected="${loan.status == 'Pending'}">Pending</option>
                                    <option value="Accepted" th:selected="${loan.status == 'Accepted'}">Accepted</option>
                                    <option value="Rejected" th:selected="${loan.status == 'Rejected'}">Rejected</option>
                                </select>
                                <button type="submit" class="btn btn-primary btn-sm">Update</button>
                            </form>
                        </td>
                    </tr>
                </tbody>
            </table>
</body>
</html>
